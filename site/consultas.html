<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SP MEDICAL GROUP - CONSULTAS</title>
    <link href="consultas.css" rel="stylesheet" >
</head>
<body>
    <button id="voltar" onclick="history.back()">Voltar</button>
    <div id="divgrandona">
        <h1 id="txtconsul">Consultas do dia: <span id="data-atual"></span></h1>
    </div>
    <div class="table-wrapper">
        <table id="consultaTable">
            <tr>
              <th></th>
              <th>Horário</th>
              <th>Médico</th>
              <th>Paciente</th>
              <th><button id="cancel" onclick="openPopup()">Cancelar</button></th>
            </tr>
        </table>
    </div>
    <div id="popup" class="popup">
        <h2>TEM CERTEZA QUE DESEJA CANCELAR SUA CONSULTA?</h2>
        <button onclick="closePopup(); removerItens()" id="removeButton">Confirmar</button>
    </div>

    <script>
    function openPopup() {
        document.getElementById("popup").style.display = "block";
    }

    function closePopup() {
        document.getElementById("popup").style.display = "none";
    }

    function removerItens() {
        var checkboxes = document.getElementsByClassName('itemCheckbox');
        var consultaTable = document.getElementById('consultaTable');

        for (var i = checkboxes.length - 1; i >= 0; i--) {
            var checkbox = checkboxes[i];

            if (checkbox.checked) {
                var row = checkbox.parentNode.parentNode;
                consultaTable.deleteRow(row.rowIndex);
            }
        }
    }

    function exibirDataAtual() {
        var dataAtual = new Date();
        var dataFormatada = dataAtual.toLocaleDateString('pt-BR');
        document.getElementById('data-atual').textContent = dataFormatada;
    }

    exibirDataAtual();
    var urlParams = new URLSearchParams(window.location.search);

    var nameText = urlParams.get("nameText");
    var emailText = urlParams.get("emailText");
    var phoneText = urlParams.get("phoneText");
    var medicalselect = urlParams.get("medicalselect");

    var consultaTable = document.getElementById("consultaTable");
    var newRow = consultaTable.insertRow();


    var checkboxCell = newRow.insertCell();
    var nameCell = newRow.insertCell();
    var emailCell = newRow.insertCell();
    var phoneCell = newRow.insertCell();
    var medCell = newRow.insertCell();

    checkboxCell.innerHTML = '<input type="checkbox" class="itemCheckbox" value="1">';
    nameCell.textContent = nameText;
    emailCell.textContent = emailText;
    phoneCell.textContent = phoneText;
    medCell.textContent = medicalselect;
    </script>
</body>
</html>